{% extends "base.html" %}
{% block content %}

<div class="container mt-5">
    <div class="row">
        <div class="col-md-3">
            <h4 class="genre-title">ჟანრები</h4>
            <ul class="genre-list list-group">
                {% for genre in genres %}
                <li class="list-group-item genre-item">
                    <a href="{{ url_for('main.movies', genre=genre) }}">{{ genre }}</a>
                </li>
                {% endfor %}
            </ul>
        </div>

        <div class="col-md-9">
            <h4>ფილმები</h4>
            <div class="row g-4">
                {% for movie in movies %}
                <div class="col-6 col-md-4 col-lg-3">
                    <div class="movie-card">
                        <a href="{{ url_for('main.movie_detail', movie_id=movie.id) }}">
                            <div class="movie-poster-wrapper">

                                <img src="{{ movie.poster }}" alt="{{ movie.title }}">
                                 {% if current_user.is_admin or movie.user_id == current_user.id %}
                <form method="POST"
                      action="{{ url_for('main.delete_movie', movie_id=movie.id) }}"
                      onsubmit="return confirm('ნამდვილად გსურთ ფილმის წაშლა?');"
                      class="movie-delete-form">
                    <button type="submit" class="btn btn-sm btn-danger movie-delete-btn">
                        ✕
                    </button>
                </form>
                {% endif %} {% if current_user.is_admin or movie.user_id == current_user.id %}
                <form method="POST"
                      action="{{ url_for('main.delete_movie', movie_id=movie.id) }}"
                      onsubmit="return confirm('ნამდვილად გსურთ ფილმის წაშლა?');"
                      class="movie-delete-form">
                    <button type="submit" class="btn btn-sm btn-danger movie-delete-btn">
                        ✕
                    </button>
                </form>
                {% endif %}
                            </div>
                            <div class="movie-info">
                                <div class="movie-title">{{ movie.title }}</div>
                                <div class="movie-genre">{{ movie.genre }}</div>
                            </div>
                        </a>


                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>

{% endblock %}